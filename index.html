<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>A World Without Builds</title>
  </head>
  <body>
    <div id="root"></div>

    <script type="importmap">
      {
        "imports": {
          "htm": "https://esm.sh/htm@^3?external=react,react-dom",
          "spectacle": "https://esm.sh/spectacle@10?external=react,react-dom&bundle",
          "broadcast-channel": "https://esm.sh/broadcast-channel@^4.17.0?external=react,react-dom",
          "history": "https://esm.sh/history@^5.3.0?external=react,react-dom",
          "kbar": "https://esm.sh/kbar@0.1.0-beta.40?external=react,react-dom",
          "lodash.clonedeep": "https://esm.sh/lodash.clonedeep@^4.5.0?external=react,react-dom",
          "mdast-builder": "https://esm.sh/mdast-builder@^1.1.1?external=react,react-dom",
          "mdast-zone": "https://esm.sh/mdast-zone@^4.0.0?external=react,react-dom",
          "merge-anything": "https://esm.sh/merge-anything@^3.0.3?external=react,react-dom",
          "mousetrap": "https://esm.sh/mousetrap@^1.6.5?external=react,react-dom",
          "query-string": "https://esm.sh/query-string@^7.1.3?external=react,react-dom",
          "react": "https://esm.sh/react@18.2.0?",
          "react/jsx-runtime": "https://esm.sh/react@18.2.0/jsx-runtime?",
          "react-dom": "https://esm.sh/react-dom@18.2.0?",
          "react-dom/client": "https://esm.sh/react-dom@18.2.0/client?",
          "react-fast-compare": "https://esm.sh/react-fast-compare@^3.2.0?external=react,react-dom",
          "react-is": "https://esm.sh/react-is@^18.1.0?external=react,react-dom",
          "react-spring": "https://esm.sh/react-spring@^9.5.5?external=react,react-dom",
          "react-swipeable": "https://esm.sh/react-swipeable@^7.0.0?external=react,react-dom",
          "react-syntax-highlighter": "https://esm.sh/react-syntax-highlighter@^15.5.0?external=react,react-dom",
          "react-syntax-highlighter/dist/cjs/styles/prism/vs-dark.js": "https://esm.sh/react-syntax-highlighter@^15.5.0/dist/esm/styles/prism/vs-dark.js?external=react,react-dom",
          "react-syntax-highlighter/dist/cjs/styles/prism/index.js": "https://esm.sh/react-syntax-highlighter@^15.5.0/dist/esm/styles/prism/index.js?external=react,react-dom",
          "rehype-raw": "https://esm.sh/rehype-raw@^5.1.0?external=react,react-dom",
          "rehype-react": "https://esm.sh/rehype-react@^6.0.0?external=react,react-dom",
          "remark-parse": "https://esm.sh/remark-parse@^8.0.3?external=react,react-dom",
          "remark-rehype": "https://esm.sh/remark-rehype@^7.0.0?external=react,react-dom",
          "styled-components": "https://esm.sh/styled-components@^5.3.6?external=react,react-dom",
          "styled-system": "https://esm.sh/styled-system@5.1.5?external=react,react-dom",
          "unified": "https://esm.sh/unified@^9.0.0?external=react,react-dom",
          "unist-util-visit": "https://esm.sh/unist-util-visit@^2.0.3?external=react,react-dom",
          "use-resize-observer": "https://esm.sh/use-resize-observer@^9.0.2?external=react,react-dom"
        }
      }
    </script>
    <script type="module">
      import React from "react";
      import { createRoot } from "react-dom/client";
      // TOOD: Hone down unused imports.
      import {
        FlexBox,
        Heading,
        SpectacleLogo,
        UnorderedList,
        CodeSpan,
        OrderedList,
        ListItem,
        Appear,
        Slide,
        Deck,
        Text,
        Link,
        FitText,
        Grid,
        Box,
        Image,
        CodePane,
        MarkdownSlide,
        MarkdownSlideSet,
        Notes,
        DefaultTemplate,
        SlideLayout,
      } from "spectacle";

      import htm from "htm";
      const html = htm.bind(React.createElement);

      // TODO: better themes
      const theme = {
        colors: {
          primary: "#e2e8f0", // Light gray for text on dark background
          secondary: "#60a5fa", // Bright blue for headings
          tertiary: "#1a202c", // Dark background
          quaternary: "#60a5fa", // Blue for links
          quinary: "#4a5568", // Medium gray for accents
        },
        fonts: {
          header: "'Inter', sans-serif;",
          text: "'Inter', sans-serif;",
        },
      };

      const template = html` <${DefaultTemplate} />`;
      const Presentation =
        () => html`<${Deck} theme=${theme} template=${template}>
          <${Slide}>
            <${FlexBox} height="100%" flexDirection="column">
              ${["A World", "Without Builds"].map(
                (text, index) => html`
                <${Heading} key=${index} fontSize="120px" style=${{ textTransform: "uppercase", margin: "0" }}>
                  ${text}
                </${Heading}>`,
              )}
              <${Heading} fontSize="h2" color="h2">CascadiaJS 2025</${Heading}>
            </${FlexBox}>
          </${Slide}>
          <${MarkdownSlideSet}>
            ${`
              <!-- TODO: Completely iron out the years for this timeline -->
              # Long, long ago...

              * **1995**: Hello JavaScript!
              * **1995-2001**: We wrote JavaScript that actually executed in the browser
              * **2001**: JSMin is introduced
              * **2010-2012**: The bundlers (_2010_: RequireJS, _2011_: Browserify, _2012_: Webpack, ...)
              * **2015-on**: The modern bundlers (_2015_: Rollup, _2017_: Parcel, _2020_: Vite, ...)

              ---
              # And now...

              A modern simple stack usually entails at least a **bundler**, a **transpiler**, and a **style library**.

              --- { "layout": "center" }
              # And that's OK!

              --- { "layout": "center" }
              # But...

              How far could we go without a build?

              ---
              # Spoilers

              * ~~_Serverless_: still runs **servers**~~
              * _Buildless_: still runs **builds**

              ---
              # The Real Questions

              * When can you go truly **pure JS**?
              * How can you use **runtime** builds?

              ---
              # Another timeline...

              * **2015**: ECMAScript Modules (ESM) released
              * **2018**: \`es-module-shims\` started
              * **2021**: Import Maps start to be supported
              * TODO: unpkg, esm.sh, jspm.io, etc.
              <!-- TODO: Other dates / technologies? -->

              ---
              # TODO: Slides to write

              * The naming problem. (import maps)
              * The React problem. (esm.sh, etc.)
              * The JSX problem. (htm)
              * The TypeScript problem (???)
              * How far can you push it?
                  * What's appropriate for production?

              ---
              # TODO: Other notes

              * Other runtime: Deno, Bun, etc.
              * Web components.
              * Fun background images.
              * ...
            `}
          </${MarkdownSlideSet}>
          () => (
          <${Slide}>
            <${CodePane} fontSize=${48} language="javascript" highlightRanges=${[1, 3]}>
              ${`
                // TODO: REMOVE
                const App = () => (
                  <Provider value={client}>
                    <Todos />
                  </Provider>
                );
              `}
            </${CodePane}>
          </${Slide}>
        </${Deck}>
      `;
      const root = createRoot(document.getElementById("root"));
      root.render(html`<${Presentation} />`);
    </script>
  </body>
</html>
