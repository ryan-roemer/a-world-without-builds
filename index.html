<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.1.1/src/regular/style.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.1.1/src/fill/style.css"
    />
    <title>A World Without Builds</title>
  </head>
  <body>
    <div id="root"></div>

    <script type="importmap">
      {
        "imports": {
          "htm": "https://esm.sh/htm@^3?external=react,react-dom",
          "spectacle": "https://esm.sh/spectacle@10?external=react,react-dom&bundle",
          "broadcast-channel": "https://esm.sh/broadcast-channel@^4.17.0?external=react,react-dom",
          "history": "https://esm.sh/history@^5.3.0?external=react,react-dom",
          "kbar": "https://esm.sh/kbar@0.1.0-beta.40?external=react,react-dom",
          "lodash.clonedeep": "https://esm.sh/lodash.clonedeep@^4.5.0?external=react,react-dom",
          "mdast-builder": "https://esm.sh/mdast-builder@^1.1.1?external=react,react-dom",
          "mdast-zone": "https://esm.sh/mdast-zone@^4.0.0?external=react,react-dom",
          "merge-anything": "https://esm.sh/merge-anything@^3.0.3?external=react,react-dom",
          "mousetrap": "https://esm.sh/mousetrap@^1.6.5?external=react,react-dom",
          "query-string": "https://esm.sh/query-string@^7.1.3?external=react,react-dom",
          "react": "https://esm.sh/react@18.2.0?",
          "react/jsx-runtime": "https://esm.sh/react@18.2.0/jsx-runtime?",
          "react-dom": "https://esm.sh/react-dom@18.2.0?",
          "react-dom/client": "https://esm.sh/react-dom@18.2.0/client?",
          "react-fast-compare": "https://esm.sh/react-fast-compare@^3.2.0?external=react,react-dom",
          "react-is": "https://esm.sh/react-is@^18.1.0?external=react,react-dom",
          "react-spring": "https://esm.sh/react-spring@^9.5.5?external=react,react-dom",
          "react-swipeable": "https://esm.sh/react-swipeable@^7.0.0?external=react,react-dom",
          "react-syntax-highlighter": "https://esm.sh/react-syntax-highlighter@^15.5.0?external=react,react-dom",
          "react-syntax-highlighter/dist/cjs/styles/prism/vs-dark.js": "https://esm.sh/react-syntax-highlighter@^15.5.0/dist/esm/styles/prism/vs-dark.js?external=react,react-dom",
          "react-syntax-highlighter/dist/cjs/styles/prism/index.js": "https://esm.sh/react-syntax-highlighter@^15.5.0/dist/esm/styles/prism/index.js?external=react,react-dom",
          "rehype-raw": "https://esm.sh/rehype-raw@^5.1.0?external=react,react-dom",
          "rehype-react": "https://esm.sh/rehype-react@^6.0.0?external=react,react-dom",
          "remark-parse": "https://esm.sh/remark-parse@^8.0.3?external=react,react-dom",
          "remark-rehype": "https://esm.sh/remark-rehype@^7.0.0?external=react,react-dom",
          "styled-components": "https://esm.sh/styled-components@^5.3.6?external=react,react-dom",
          "styled-system": "https://esm.sh/styled-system@5.1.5?external=react,react-dom",
          "unified": "https://esm.sh/unified@^9.0.0?external=react,react-dom",
          "unist-util-visit": "https://esm.sh/unist-util-visit@^2.0.3?external=react,react-dom",
          "use-resize-observer": "https://esm.sh/use-resize-observer@^9.0.2?external=react,react-dom"
        }
      }
    </script>
    <script type="module">
      import { Fragment, createElement } from "react";
      import { createRoot } from "react-dom/client";
      import htm from "htm";
      // TOOD: Hone down unused imports.
      import {
        FlexBox,
        Heading,
        UnorderedList,
        CodeSpan,
        OrderedList,
        ListItem,
        Appear,
        Slide,
        Deck,
        Text,
        Link,
        FitText,
        Grid,
        Box,
        Image,
        CodePane,
        MarkdownSlide,
        MarkdownSlideSet,
        Notes,
        DefaultTemplate,
        SlideLayout,
      } from "spectacle";

      import { theme, colors } from "./deck/theme.js";
      import { logos, backgrounds } from "./deck/media.js";
      import { getExamples } from "./deck/examples.js";
      const html = htm.bind(createElement);

      // Components, helpers.
      const icon = (args) => {
        const { name, fill = true } =
          typeof args === "object" ? args : { name: args };
        return `<i class="ph${fill ? "-fill" : ""} ph-${name}"></i>`;
      };
      const iconArrow = icon({ name: "arrow-right", fill: false });
      const IconHtm = ({ name, fill = true }) =>
        html`<i class="ph${fill ? "-fill" : ""} ph-${name}"></i>`;
      const IconLink = ({ name, href, fill = false, color }) => html`
        <a href=${href} style=${{ color, textDecoration: "none" }}
          ><${IconHtm} name=${name} fill=${fill}
        /></a>
      `;

      const template = html` <${DefaultTemplate} />`;
      const examples = await getExamples();
      console.log(examples);

      // Examples presentation.
      Object.keys(examples).forEach((key) => {
        examples[key].slides = html`
          <${Fragment} key=${key}>
            <${Slide}>
              <${Heading} fontSize="h3">
                ${examples[key].name}
                <span style=${{ color: theme.colors.primary }}> - Code </span>
                <${IconLink} href=${examples[key].path} name="link" color=${theme.colors.primary} />
              </${Heading}>
              <${CodePane} language="${key === "typescript" ? "typescript" : "javascript"}">
                ${examples[key].code}
              </${CodePane}>
            </${Slide}>
            ${examples[key].html.map(
              (block, index, items) => html`
              <${Slide} key=${index}>
                <${Heading} fontSize="h3">
                  ${examples[key].name}
                  <span style=${{ color: theme.colors.primary }}> - HTML${items.length > 1 ? ` (${index + 1})` : ""} </span>
                  <${IconLink} href=${examples[key].path} name="link" color=${theme.colors.primary} />
                </${Heading}>
                <${CodePane} language="html">${block}</${CodePane}>
              </${Slide}>
            `,
            )}
          </${Fragment}>
        `;
      });

      // The presentation deck.
      const Presentation =
        () => html`<${Deck} theme=${theme} template=${template}>
          <${Slide}>
            <${FlexBox} height="100%" flexDirection="column">
              ${["A World", "Without Builds"].map(
                (text, index) => html`
                <${Heading} key=${index} fontSize="140px" style=${{ textTransform: "uppercase", margin: "0" }}>
                  ${text}
                </${Heading}>`,
              )}
              <${Heading} fontSize="h2" color="h2">
                <${IconHtm} name="tree-evergreen" /> CascadiaJS 2025
                </${Heading}>
            </${FlexBox}>
          </${Slide}>
          <${Slide} backgroundImage="url(${backgrounds.seattle})" backgroundOpacity=${0.5}>
            <${FlexBox} height="100%" flexDirection="column" justifyContent="center" alignItems="center">
              <${Heading} fontSize="150px" color="h2" style=${{ textAlign: "center", margin: "0" }}>
                <${IconHtm} name="heart" /> CascadiaJS
              </${Heading}>
            </${FlexBox}>
          </${Slide}>
          <${MarkdownSlideSet}>
            ${`

              --- { "layout": "center" }
              # Hi!

              ${icon("hand-waving")} I'm Ryan Roemer
              ${logos.nearform} I lead technology & OSS at [Nearform](https://nearform.com)
              ${icon("toolbox")} I **like** & **dislike** builds

              ---
              # Long, long ago...

              * **1995**: Hello JavaScript!
              * **1995-2001**: We wrote JavaScript that actually executed in the browser
            `}
          </${MarkdownSlideSet}>
          ${examples.legacy.slides}
          <${MarkdownSlideSet}>
            ${`
              ---
              # And then ...

              * **2001**: JSMin is introduced
              * **2010-2015**: The bundlers (_2010_: RequireJS, _2011_: Browserify, _2012_: Webpack, ...)
              * **2015-on**: The modern bundlers (_2015_: Rollup, _2017_: Parcel, _2020_: Vite, ...)

              ---
              # And now...

              A modern simple stack usually entails at least a **bundler**, a **transpiler**, and a **style library**.

              We run **minified, heavily transformed** code.

              Builds are **complicated** and **time-consuming**.

              --- { "layout": "center" }
              # And that's OK!

              --- { "layout": "center" }
              # But...

              How far could we go without a build?

              ---
              # Spoilers

              * This is just a timeline and greatest hits.
                  * Skipping over a ton of technical detail.
              * Most large scale web apps probably still **need builds**
              * We cheat (✨) ${iconArrow} _Buildless_ still runs **builds**

              ---
              # The Interesting Parts

              * The evolution of the space.
              * When **native** works
              * When to shift to **runtime** builds.
              * What can you actually get away with? ${iconArrow}
                React? TypeScript?

              ---
              # Another timeline...

              * **2015**: ECMAScript Modules (ESM) released
              * **2018**: \`es-module-shims\` started
              * **2021**: Import Maps start to be supported
              * TODO: Insert these in!!!
                  * _2017_: unpkg.com module flag, _2020_: esm.sh, _2017_: jspm.io, etc.
                  * _2018_: Deno, _2022_: Bun
            `}
          </${MarkdownSlideSet}>
          ${examples.modern.slides}
          <${MarkdownSlideSet}>
            ${`
              ---
              # Some initial challenges

              * Naming (\`next\`, \`lodash\`) ${iconArrow}
                Import Maps
              * The React problem (CommonJS vs. ESM) ${iconArrow}
                ESM-savvy CDNs (✨)
              * JSX? ${iconArrow} Meet [htm](https://github.com/developit/htm) (✨)

            `}
          </${MarkdownSlideSet}>
          ${examples.react.slides}
          <${MarkdownSlideSet}>
            ${`
              ---
              # Performance

              * Spoiler: it's faster to bundle
                  * ... but how much?
                  * ... and what does your application actually need?
              * Let's compare a no-build/htm app vs. a fully webpack/babel-ified one!
                  * ... in an unscientific
                    <span style="color: ${theme.colors.secondary}">**BATTLE OF THE BUILDS**</span>

              --- { "layout" : "columns" }

              <!-- TODO: Images??? -->

              ::section

              ## No Build

              - 112 requests
              - 826 kB transferred
              - 4.8 MB resources
              - Finish: 257 ms
              - DOM: 235 ms
              - Load: 235 ms

              ::section

              ## A Build

              - 5 requests
              - 640 kB transferred
              - 3.3 MB resources
              - Finish: 154 ms
              - DOM: 139 ms
              - Load: 139 ms

              ---

              # The future...

              * Runtimes / "the platforms" continue to evolve
                * _Frontend_: \`es-module-shims\`, Web Components
                * _Backend_: Node.js, Deno, Bun
              * TypeScript, WASM
              * Where might we head next?

            `}
          </${MarkdownSlideSet}>
          ${examples.typescript.slides}
          <${MarkdownSlideSet}>
            ${`
              ---
              # TODO: Content Notes

              * More on es-import-shims future and browser directions
              * Folks like JSPM, etc. are really pushing how much you can do without a build.
              * Maybe a slide / quick analysis of perf
                  * This presentation!
                  * blogs-ai app
              * ...

              ---
              # TODO: Design Notes

              * Fun background images.
              * Use other typography for bigger single message (centered) slides

              ---
              # TODO: This deck

              * Spectacle link
              * This deck link
              * Look at the import map

              --- { "layout": "center" }
              # TODO: Thanks

              [ryan-roemer.github.io/a-world-without-builds](https://ryan-roemer.github.io/a-world-without-builds/)

              ${icon("github-logo")} [ryan-roemer/a-world-without-builds](https://github.com/ryan-roemer/a-world-without-builds)
              ${icon("twitter-logo")} [@ryan_roemer](https://x.com/ryan_roemer)
              ${icon("butterfly")} [@ryan-roemer.bsky.social](https://bsky.app/profile/ryan-roemer.bsky.social)
              ${icon("linkedin-logo")} [in/ryanroemer](https://www.linkedin.com/in/ryanroemer/)
              ${icon("envelope")} [ryan.roemer@nearform.com](mailto:ryan.roemer@nearform.com)
            `}
          </${MarkdownSlideSet}>
        </${Deck}>
      `;

      const root = createRoot(document.getElementById("root"));
      root.render(html`<${Presentation} />`);
    </script>
  </body>
</html>
