<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.1.1/src/regular/style.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.1.1/src/fill/style.css"
    />
    <style>
      /* HACK: hack off generated class names */
      .enpNOd > code {
        color: #aaa; /* grey[30] */
      }
      /* HACK: Code pane font size */
      /* .sc-iHGNWf pre {
        font-size: 18px !important;
      } */
    </style>
    <title>A World Without Builds</title>
  </head>
  <body>
    <div id="root"></div>

    <script type="importmap">
      {
        "imports": {
          "htm": "https://esm.sh/htm@^3?external=react,react-dom",
          "spectacle": "https://esm.sh/spectacle@10?external=react,react-dom&bundle",
          "broadcast-channel": "https://esm.sh/broadcast-channel@^4.17.0?external=react,react-dom",
          "history": "https://esm.sh/history@^5.3.0?external=react,react-dom",
          "kbar": "https://esm.sh/kbar@0.1.0-beta.40?external=react,react-dom",
          "lodash.clonedeep": "https://esm.sh/lodash.clonedeep@^4.5.0?external=react,react-dom",
          "mdast-builder": "https://esm.sh/mdast-builder@^1.1.1?external=react,react-dom",
          "mdast-zone": "https://esm.sh/mdast-zone@^4.0.0?external=react,react-dom",
          "merge-anything": "https://esm.sh/merge-anything@^3.0.3?external=react,react-dom",
          "mousetrap": "https://esm.sh/mousetrap@^1.6.5?external=react,react-dom",
          "query-string": "https://esm.sh/query-string@^7.1.3?external=react,react-dom",
          "react": "https://esm.sh/react@18.2.0?",
          "react/jsx-runtime": "https://esm.sh/react@18.2.0/jsx-runtime?",
          "react-dom": "https://esm.sh/react-dom@18.2.0?",
          "react-dom/client": "https://esm.sh/react-dom@18.2.0/client?",
          "react-dom/server": "https://esm.sh/react-dom@18.2.0/server?",
          "react-fast-compare": "https://esm.sh/react-fast-compare@^3.2.0?external=react,react-dom",
          "react-is": "https://esm.sh/react-is@^18.1.0?external=react,react-dom",
          "react-spring": "https://esm.sh/react-spring@^9.5.5?external=react,react-dom",
          "react-swipeable": "https://esm.sh/react-swipeable@^7.0.0?external=react,react-dom",
          "react-syntax-highlighter": "https://esm.sh/react-syntax-highlighter@^15.5.0?external=react,react-dom",
          "react-syntax-highlighter/dist/cjs/styles/prism/vs-dark.js": "https://esm.sh/react-syntax-highlighter@^15.5.0/dist/esm/styles/prism/vs-dark.js?external=react,react-dom",
          "react-syntax-highlighter/dist/cjs/styles/prism/index.js": "https://esm.sh/react-syntax-highlighter@^15.5.0/dist/esm/styles/prism/index.js?external=react,react-dom",
          "rehype-raw": "https://esm.sh/rehype-raw@^5.1.0?external=react,react-dom",
          "rehype-react": "https://esm.sh/rehype-react@^6.0.0?external=react,react-dom",
          "remark-parse": "https://esm.sh/remark-parse@^8.0.3?external=react,react-dom",
          "remark-rehype": "https://esm.sh/remark-rehype@^7.0.0?external=react,react-dom",
          "styled-components": "https://esm.sh/styled-components@^5.3.6?external=react,react-dom",
          "styled-system": "https://esm.sh/styled-system@5.1.5?external=react,react-dom",
          "unified": "https://esm.sh/unified@^9.0.0?external=react,react-dom",
          "unist-util-visit": "https://esm.sh/unist-util-visit@^2.0.3?external=react,react-dom",
          "use-resize-observer": "https://esm.sh/use-resize-observer@^9.0.2?external=react,react-dom"
        }
      }
    </script>
    <script type="module">
      import { Fragment, createElement } from "react";
      import { createRoot } from "react-dom/client";
      import { renderToString } from "react-dom/server";
      import htm from "htm";
      // TOOD: Hone down unused imports.
      import {
        FlexBox,
        Heading,
        UnorderedList,
        CodeSpan,
        OrderedList,
        ListItem,
        Appear,
        Slide,
        Deck,
        Text,
        Link,
        FitText,
        Grid,
        Box,
        Image,
        CodePane,
        MarkdownSlide,
        MarkdownSlideSet,
        Notes,
        DefaultTemplate,
        SlideLayout,
        SpectacleLogo,
      } from "spectacle";

      import { theme, colors } from "./deck/theme.js";
      import { logos, logosHtm, backgrounds } from "./deck/media.js";
      import { getExamples } from "./deck/examples.js";
      const html = htm.bind(createElement);

      // Components, helpers.
      const icon = (args) => {
        const { name, fill = true } =
          typeof args === "object" ? args : { name: args };
        return `<i class="ph${fill ? "-fill" : ""} ph-${name}"></i>`;
      };
      const iconArrow = icon({ name: "arrow-right", fill: false });
      const IconHtm = ({ name, fill = true }) =>
        html`<i class="ph${fill ? "-fill" : ""} ph-${name}"></i>`;
      const IconLink = ({ name, href, fill = false, color }) => html`
        <a href=${href} style=${{ color, textDecoration: "none" }}
          ><${IconHtm} name=${name} fill=${fill}
        /></a>
      `;
      const mdEmphasis = (text) =>
        `<span style="color: ${theme.colors.secondary};">${text}</span>`;

      const template = html` <${DefaultTemplate} />`;
      const examples = await getExamples();

      // Examples presentation.
      Object.keys(examples).forEach((key) => {
        const ex = examples[key];
        const backgroundOpts = !ex.background
          ? {}
          : {
              backgroundImage: `url(${backgrounds[ex.background]})`,
              backgroundOpacity: 0.4,
              backgroundColor: colors.basics.black,
            };

        ex.slides = html`
          <${Fragment} key=${key}>
            <${Slide} ...${backgroundOpts}>
              <${Heading} fontSize="h3">
                ${ex.name} -
                ${" "}<code style=${{ color: theme.colors.primary }}>${ex.codeFileName}</code>
                ${" "}<${IconLink} href=${ex.path} name="link" color=${theme.colors.quaternary} />
              </${Heading}>
              <${CodePane} language="${key === "typescript" ? "typescript" : "javascript"}">
                ${ex.code}
              </${CodePane}>
            </${Slide}>
            ${ex.html.map(
              (block, index, items) => html`
              <${Slide} key=${index} ...${backgroundOpts}>
                <${Heading} fontSize="h3">
                  ${ex.name} ${items.length > 1 ? ` (${index + 1})` : ""} -
                  ${" "}<code style=${{ color: theme.colors.primary }}>${ex.htmlFileName}</code>
                  ${" "}<${IconLink} href=${ex.path} name="link" color=${theme.colors.secondary} />
                </${Heading}>
                <${CodePane} language="html">${block}</${CodePane}>
              </${Slide}>
            `,
            )}
          </${Fragment}>
        `;
      });

      // The presentation deck.
      const Presentation =
        () => html`<${Deck} theme=${theme} template=${template}>
          <${Slide}>
            <${FlexBox} height="100%" flexDirection="column">
              ${["A World", "Without Builds"].map(
                (text, index) => html`
                <${Heading} key=${index} fontSize="140px" style=${{ textTransform: "uppercase", margin: "0" }}>
                  ${text}
                </${Heading}>`,
              )}
              <${Heading} fontSize="h2" color="h2">
                <${IconHtm} name="tree-evergreen" /> CascadiaJS 2025
                </${Heading}>
            </${FlexBox}>
          </${Slide}>
          <${Slide}
            backgroundImage="url(${backgrounds.seattle})"
            backgroundOpacity=${0.6}
            backgroundColor="${colors.basics.black}"
          >
            <${FlexBox} height="100%" flexDirection="column" justifyContent="center" alignItems="center">
              <${Heading} fontSize="150px" color="primary">
                <${IconHtm} name="heart" /> CascadiaJS
              </${Heading}>
            </${FlexBox}>
          </${Slide}>
          <${Slide}>
            <${FlexBox} flexDirection="column" alignSelf="center" justifyContent="left" alignItems="left">
              <${Heading} fontSize="h1" color="secondary">
                Hi!
              </${Heading}>
              <${Text} fontSize="h3">
                <${IconHtm} name="hand-waving" /> I'm Ryan Roemer
              </${Text}>
              <${Text} fontSize="h3">
                ${logosHtm.nearform} I lead technology & OSS at <${Link} href="https://nearform.com" fontSize="h3">Nearform</${Link}>
              </${Text}>
              <${Text} fontSize="h3">
                <${IconHtm} name="toolbox" /> I <strong>like</strong> & <strong>dislike</strong> builds
              </${Text}>
            </${FlexBox}>
          </${Slide}>
          <${Slide} backgroundImage="url(${backgrounds.spectacle})">
            <${FlexBox} height="100%" flexDirection="column" justifyContent="center" alignItems="center">
              <${Link} href="https://nearform.com/open-source/spectacle">
                <${SpectacleLogo} size=${400} />
              </${Link}>
              <${Text} fontSize="h3">
                <${Link}
                  href="https://nearform.com/open-source"
                  color="rgb(252, 105, 134)"
                  textDecoration="none"
                >
                  nearform.com/open-source
                </${Link}>
              </${Text}>
            </${FlexBox}>
          </${Slide}>
          <${Slide}>
            <${FlexBox} flexDirection="column" alignSelf="center" justifyContent="left" alignItems="left">
              <${Heading} color="secondary">
                Our whirlwind tour...
              </${Heading}>
              <${UnorderedList} fontSize="h3">
                <${Appear}><${ListItem}>The past</${ListItem}></${Appear}>
                <${Appear}><${ListItem}>The present (in two ways)</${ListItem}></${Appear}>
                <${Appear}><${ListItem}>The buildless future?</${ListItem}></${Appear}>
              </${UnorderedList}>
            </${FlexBox}>
          </${Slide}>
          <${MarkdownSlideSet} animateListItems=${true}>
            ${`
              ---
              # Long, long ago...

              * **1995**: We met JavaScript.
              * **1995-2001**: We wrote JavaScript that actually executed in the browser

            `}
          </${MarkdownSlideSet}>
          <${Slide}
            backgroundImage="url(${backgrounds.vintageComputer})"
            backgroundOpacity=${0.4}
            backgroundColor="${colors.basics.black}"
          >
            <${FlexBox} height="100%" flexDirection="column" alignSelf="center" justifyContent="center" alignItems="center">
              <${Heading} fontSize="h1" color="primary">
                And it looked like this...
              </${Heading}>
            </${FlexBox}>
          </${Slide}>
          ${examples.legacy.slides}
          <${MarkdownSlideSet} animateListItems=${true}>
            ${`
              ---
              # And then ...

              * **2001**: A ${mdEmphasis("**minifier**")}! (_JSMin_)
              * **2010-2015**: ${mdEmphasis("**Bundlers**")}!
                  * _RequireJS_, _Browserify_, _Webpack_, ...
                  <!-- (_2010_: RequireJS, _2011_: Browserify, _2012_: Webpack, ...) -->
              * **2015-on**: ${mdEmphasis("**Fancier bundlers**")}
                  * _Rollup_, _Parcel_, _Vite_, ...
                  <!-- (_2015_: Rollup, _2017_: Parcel, _2020_: Vite, ...) -->

              ---
              # And now...

              A modern simple stack usually entails at least a **bundler**, a **transpiler**, and a **style library**.

              We run **minified, heavily transformed** code.

              We no longer _${mdEmphasis("run")}_ the code we _${mdEmphasis("write")}_.

              --- { "layout": "center" }
              # And that's OK!

            `}
          </${MarkdownSlideSet}>
          <${Slide}>
            <${Heading} fontSize="h1">
              But...
            </${Heading}>
            <${Text} fontSize="h3" textAlign="center">
              How far could we go without a build?
            </${Text}>
          </${Slide}>
          <${MarkdownSlideSet} animateListItems=${true}>
            ${`
              # Spoilers

              * This is just a timeline and greatest hits
              * Skipping over a ton of technical detail
              * Most large scale web apps probably still **need builds**
              * We cheat (✨)
                * _Buildless_ still runs **builds**

              ---
              # The Interesting Parts

              * What works **${mdEmphasis("natively")}**?
                * No webpack/vite, no TypeScript/JSX/Babel, ...
                * Just the **real JavaScript** we wrote executing in a browser?
              * When can we push the build to **${mdEmphasis("runtime")}** (e.g. CDN)?
              * What can you actually get away with (e.g. ${mdEmphasis("React")})?
            `}
          </${MarkdownSlideSet}>
          <${Slide}>
            <${Heading} fontSize="h1">
                Another timeline...
              </${Heading}>
              <${Text} textAlign="center">
                That's a bit less well-known and a bit bumpy...
              </${Text}>
          </${Slide}>
          <${MarkdownSlideSet} animateListItems=${true}>
            ${`
              ---
              # **2015**: ECMAScript Modules (ESM)

              Named exports

              \`\`\`js
              export const users = [ ... ];
              \`\`\`

              Static and dynamic imports
              \`\`\`js
              // Static import
              import { users } from "./users.js";

              // Dynamic import
              const { users } = await import("./users.js");
              \`\`\`

              --- { "layout": "center" }
              # Let's see these new modules!

            `}
          </${MarkdownSlideSet}>
          ${examples.modern.slides}
          <${MarkdownSlideSet}>
            ${`
              --- { "layout": "center" }
              # Yay!

              --- { "layout": "center" }
              # Ok, then we hit all the hard parts...

              ---
              # **2018**: Import Maps

              ${mdEmphasis("The problem")}: bare specifiers (aka \`"lodash"\`)

              \`\`\`js
              import lodash from "lodash"; // ⚠️ Doesn't work
              \`\`\`

              ${mdEmphasis("The solution")}: map a bare specifier to a URL
              <!-- March 2018 first repo
                   https://github.com/WICG/import-maps/blob/2ed3a0c6acb196d2469cbb5e0fc064276d0fe5dc/README.md
                -->

              \`\`\`html
              <${""}script type="importmap">
                {
                  "imports": {
                    "lodash": "https://esm.sh/lodash@^4.17.21"
                  }
                }
              <${""}/script>
              \`\`\`

              ---
              # **2018**: Import Maps

              ${mdEmphasis("The problem")}: **NONE OF THIS IS IMPLEMENTED YET**

              ${mdEmphasis("The solution")}: [\`es-module-shims\`](https://github.com/guybedford/es-module-shims)

              \`\`\`html
              <!-- ✨ Check out the '-shim' suffix -->
              <${""}script type="importmap-shim">
                {
                  "imports": {
                    "lodash": "https://esm.sh/lodash@^4.17.21"
                  }
                }
              <${""}/script>
              \`\`\`

              ---
              # **2021**: Import Maps

              OK, now they finally start to be supported.

              ---
              # **2017+**: CDNs

              ${mdEmphasis("The problem")}: \`react\` only ships CommonJS.

              ${mdEmphasis("The solution")}: CDNs get more savvy with lazy ESM conversion (✨).

              Enter \`esm.sh\`, \`jspm.io\`, \`unpkg.com\`, ...

              <!-- _2017_: unpkg.com module flag, _2020_: esm.sh, _2017_: jspm.io, etc. -->
              <!-- _2018_: Deno, _2022_: Bun -->

              --- { "layout": "center" }
              # Let's ship a React app!

            `}
          </${MarkdownSlideSet}>
          ${examples.react.slides}
          <${MarkdownSlideSet} animateListItems=${true}>
            ${`
              --- { "layout": "center" }
              # How about the real world?

              ---
              # Performance

              * Spoiler: it's faster to bundle
                  * ... but how much?
                  * ... and what does your application actually need?
              * Let's compare build vs. no build in an unscientific...

              --- { "layout": "center" }
              # **BATTLE OF THE BUILDS**

            `}
          </${MarkdownSlideSet}>
          <${MarkdownSlideSet}>
            ${`
              --- { "layout" : "columns" }

              <!-- TODO: I STILL DON'T LIKE THIS SLIDE -->

              ::section

              ## No Build

              - **Bigger**:
                - 112 requests
                - 826 kB
              - **Slower**: 250 ms

              <!--
              - **Smaller**:112 requests
              - 826 kB transferred
              - 4.8 MB resources
              - Finish: 257 ms
              - DOM: 235 ms
              - Load: 235 ms
              -->

              ::section

              ## A Build

              - **Smaller**:
                - 5 requests
                - 640 kB
              - **Faster** 150 ms

              <!--
              - 5 requests
              - 640 kB transferred
              - 3.3 MB resources
              - Finish: 154 ms
              - DOM: 139 ms
              - Load: 139 ms
              -->

            `}
          </${MarkdownSlideSet}>
          <${MarkdownSlideSet} animateListItems=${true}>
            ${`
              ---
              # Where might we head next?

              * The future that _will be_
                * JSON / CSS modules
                * WASM modules
              * The future that _could be_ (✨ \`es-module-shims\`)
                * Hot reload
                * TypeScript!?

              Notes: \
                Technologies and companies like es-module-shims, JSPM, etc. are \
                really pushing how much you can do without a build.
            `}
          </${MarkdownSlideSet}>
          ${examples.typescript.slides}
          <${MarkdownSlideSet}>
            ${`
              --- { "layout": "center" }
              # Go play around!

              See the deck at:
              ${icon("browser")} [ryan-roemer.github.io/a-world-without-builds](https://ryan-roemer.github.io/a-world-without-builds/)

              ...and check out the code at:
              ${icon("github-logo")} [ryan-roemer/a-world-without-builds](https://github.com/ryan-roemer/a-world-without-builds)

              Notes: \
                You've probable guessed the spoiler here...\
                This Spectacle deck is a no-build React application that uses htm!

              --- { "layout": "center" }
              # Thanks!

              ${icon("twitter-logo")} [@ryan_roemer](https://x.com/ryan_roemer)
              ${icon("butterfly")} [@ryan-roemer.bsky.social](https://bsky.app/profile/ryan-roemer.bsky.social)
              ${icon("linkedin-logo")} [in/ryanroemer](https://www.linkedin.com/in/ryanroemer/)
              ${icon("envelope")} [ryan.roemer@nearform.com](mailto:ryan.roemer@nearform.com)
            `}
          </${MarkdownSlideSet}>
        </${Deck}>
      `;

      const root = createRoot(document.getElementById("root"));
      root.render(html`<${Presentation} />`);
    </script>
  </body>
</html>
